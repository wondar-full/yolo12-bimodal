# =====================================================================
# VisDrone + UAVDT 联合训练 RGB-D 数据集配置
# =====================================================================
# 创建时间: 2025-11-16
# 用途: 严格对齐RemDet论文实验设置 (from scratch, 300 epochs)
# 训练数据: VisDrone (6,471) + UAVDT (23,258) = 29,729 张
# 验证数据: VisDrone (548)
# =====================================================================

# 数据集根目录（远程服务器路径）
path: /data2/user/2024/lzy/Datasets

# =====================================================================
# RGB 图像路径
# =====================================================================
train:
  - VisDrone2019-DET-YOLO/VisDrone2YOLO/train/images/rgb # 6,471张
  - UAVDT_YOLO/train/images/rgb # 23,258张

val: VisDrone2019-DET-YOLO/VisDrone2YOLO/val/images/rgb # 548张

# =====================================================================
# 深度图路径 (RGB-D模式)
# =====================================================================
# 注意: 需要提前生成深度图，与RGB图像一一对应
train_depth:
  - VisDrone2019-DET-YOLO/VisDrone2YOLO/train/images/d # 对应VisDrone RGB
  - UAVDT_YOLO/train/images/d # 对应UAVDT RGB

val_depth: VisDrone2019-DET-YOLO/VisDrone2YOLO/val/images/d

# =====================================================================
# 类别配置 (保持VisDrone 10类标准)
# =====================================================================
nc: 10 # Number of classes

# VisDrone类别映射 (0-based indexing)
names:
  0: pedestrian
  1: people
  2: bicycle
  3: car
  4: van
  5: truck
  6: tricycle
  7: awning-tricycle
  8: bus
  9: motor

# =====================================================================
# 数据集权重配置 (多数据集采样策略)
# =====================================================================
# 选项1: 等权重采样 (每个样本被选中概率相同)
dataset_weights:
  visdrone: 1.0
  uavdt: 1.0

# 选项2: 平衡采样 (每epoch两数据集样本数相近)
# dataset_weights:
#   visdrone: 3.59  # 23,258 / 6,471 ≈ 3.59
#   uavdt: 1.0

# =====================================================================
# UAVDT 类别过滤配置
# =====================================================================
# UAVDT只有3类 (car, truck, bus)，需要映射到VisDrone类别
uavdt_class_mapping:
  car: 3 # VisDrone的car类别
  truck: 5 # VisDrone的truck类别
  bus: 8 # VisDrone的bus类别

# UAVDT中非car/truck/bus的目标将被忽略
uavdt_ignore_classes: true

# =====================================================================
# 数据集统计信息 (用于验证)
# =====================================================================
train_samples:
  visdrone: 6471
  uavdt: 23258
  total: 29729

val_samples: 548
# =====================================================================
# 备注
# =====================================================================
# 1. 深度图生成命令:
#    python tools/generate_depth_maps.py \
#      --images /data2/user/2024/lzy/Datasets/UAVDT_YOLO/train/images \
#      --output /data2/user/2024/lzy/Datasets/UAVDT_YOLO/train/depths \
#      --batch 16 --device 0
#
# 2. 标注格式: YOLO格式 (class x_center y_center width height)
#
# 3. 对齐RemDet: 本配置严格对齐RemDet论文的数据集设置
#    - VisDrone2019-DET: 训练6,471 / 验证548
#    - UAVDT: 训练23,258 / 验证2,934 (但我们只在VisDrone验证)
